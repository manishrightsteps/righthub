{
  "project": {
    "name": "Rightsteps API Inventory",
    "version": "8.5.0",
    "description": "Backend API for Rightsteps",
    "baseUrl": "http://localhost:5000/v1",
    "lastUpdated": "2026-01-23"
  },
  "modules": [
    {
      "name": "Auth Module",
      "path": "/auth",
      "description": "Authentication and authorization endpoints including OAuth, registration, login, password management, and session management",
      "status": "completed",
      "endpoints": [
        "Health Check",
        "Register",
        "Verify OTP",
        "Login",
        "Get Me",
        "Refresh Token",
        "Logout",
        "Logout All Devices",
        "Get Active Sessions",
        "Revoke Session",
        "Forgot Password",
        "Reset Password",
        "Send Verification Email",
        "Admin Register",
        "Google OAuth",
        "Facebook OAuth"
      ]
    },
    {
      "name": "Profile Module",
      "path": "/profile",
      "description": "User profile management for parents, tutors, and children with role-based operations",
      "status": "completed",
      "subModules": [
        {
          "name": "Common Profile",
          "description": "Shared profile operations across all user types",
          "endpoints": [
            "Health Check",
            "Select Role",
            "Get My Profile"
          ]
        },
        {
          "name": "Parent Profile",
          "description": "Parent-specific profile and children management with progressive registration",
          "endpoints": [
            "Create Parent Profile",
            "Add Children",
            "Update Parent Profile",
            "Verify Email Update",
            "Update Child",
            "Delete Child"
          ]
        },
        {
          "name": "Parent Access Control",
          "description": "Parent/child profile switching with PIN authentication and account recovery",
          "endpoints": [
            "Select Profile (Parent/Child)",
            "Validate PIN",
            "Verify Security Answer",
            "Verify OTP and Reset PIN",
            "Validate Temp PIN and Change PIN"
          ]
        },
        {
          "name": "Tutor Profile",
          "description": "Tutor profile with progressive registration (8 steps: 6 registration + verification pending + completed) and admin verification workflow",
          "endpoints": [
            "Create Tutor Profile",
            "Update Tutor Profile"
          ]
        },
        {
          "name": "Speech Therapist Profile",
          "description": "Speech therapist profile with progressive registration (7 steps: 5 registration + verification pending + completed) and admin verification workflow",
          "endpoints": [
            "Create Speech Therapist Profile",
            "Update Speech Therapist Profile"
          ]
        },
        {
          "name": "Child Psychologist Profile",
          "description": "Child psychologist profile with progressive registration (7 steps: 5 registration + verification pending + completed) and admin verification workflow",
          "endpoints": [
            "Create Child Psychologist Profile",
            "Update Child Psychologist Profile"
          ]
        },
        {
          "name": "Career Counselor Profile",
          "description": "Career counselor profile with progressive registration (7 steps: 5 registration + verification pending + completed) and admin verification workflow",
          "endpoints": [
            "Create Career Counselor Profile",
            "Update Career Counselor Profile"
          ]
        },
        {
          "name": "Occupational Therapist Profile",
          "description": "Occupational therapist profile with progressive registration (7 steps: 5 registration + verification pending + completed) and admin verification workflow",
          "endpoints": [
            "Create Occupational Therapist Profile",
            "Update Occupational Therapist Profile"
          ]
        },
        {
          "name": "Social Skills Coach Profile",
          "description": "Social skills coach profile with progressive registration (7 steps: 5 registration + verification pending + completed) and admin verification workflow",
          "endpoints": [
            "Create Social Skills Coach Profile",
            "Update Social Skills Coach Profile"
          ]
        },
        {
          "name": "SEN Practitioner Profile",
          "description": "SEN practitioner profile with progressive registration (7 steps: 5 registration + verification pending + completed) and admin verification workflow",
          "endpoints": [
            "Create SEN Practitioner Profile",
            "Update SEN Practitioner Profile"
          ]
        },
        {
          "name": "Nutrition Advisor Profile",
          "description": "Nutrition advisor profile with progressive registration (7 steps: 5 registration + verification pending + completed) and admin verification workflow",
          "endpoints": [
            "Create Nutrition Advisor Profile",
            "Update Nutrition Advisor Profile"
          ]
        },
        {
          "name": "Digital Wellbeing Practitioner Profile",
          "description": "Digital wellbeing practitioner profile with progressive registration (7 steps: 5 registration + verification pending + completed) and admin verification workflow",
          "endpoints": [
            "Create Digital Wellbeing Practitioner Profile",
            "Update Digital Wellbeing Practitioner Profile"
          ]
        },
        {
          "name": "Admin Profile Operations",
          "description": "Admin endpoints for managing profiles",
          "endpoints": [
            "Get Child Details",
            "Get Parent Profiles",
            "Get Pending Tutor Profiles",
            "Verify Tutor Profile",
            "Get Pending Speech Therapist Profiles",
            "Verify Speech Therapist Profile",
            "Get Pending Child Psychologist Profiles",
            "Verify Child Psychologist Profile",
            "Get Pending Career Counselor Profiles",
            "Verify Career Counselor Profile",
            "Get Pending Occupational Therapist Profiles",
            "Verify Occupational Therapist Profile",
            "Get Pending Social Skills Coach Profiles",
            "Verify Social Skills Coach Profile",
            "Get Pending SEN Practitioner Profiles",
            "Verify SEN Practitioner Profile",
            "Get Pending Nutrition Advisor Profiles",
            "Verify Nutrition Advisor Profile",
            "Get Pending Digital Wellbeing Practitioner Profiles",
            "Verify Digital Wellbeing Practitioner Profile"
          ]
        }
      ]
    },
    {
      "name": "Subscription Module",
      "path": "/subscription",
      "description": "Subscription plan management and payment processing with Stripe and PayPal integration",
      "status": "completed",
      "subModules": [
        {
          "name": "Subscription Operations",
          "description": "User subscription management",
          "endpoints": [
            "Health Check",
            "Calculate Pricing",
            "Subscribe to Plan",
            "Get My Subscription",
            "Cancel My Subscription",
            "Get My Payments"
          ]
        },
        {
          "name": "Payment Operations",
          "description": "Payment processing with multiple gateways",
          "endpoints": [
            "Get Payment Config",
            "Create Payment Intent",
            "Create Checkout Session",
            "Confirm Stripe Payment",
            "Capture PayPal Payment"
          ]
        },
        {
          "name": "Plan Management",
          "description": "Admin endpoints for managing subscription plans",
          "endpoints": [
            "Get All Plans",
            "Get Plan by ID",
            "Create Plan",
            "Update Plan",
            "Delete Plan",
            "Update Plan Price",
            "Add Plan Feature",
            "Update Plan Feature",
            "Delete Plan Feature",
            "Add Multi-Student Discount",
            "Update Multi-Student Discount",
            "Delete Multi-Student Discount"
          ]
        }
      ]
    },
    {
      "name": "Upload Module",
      "path": "/upload",
      "description": "File upload and management with ImageKit and S3 support for images, videos, and documents",
      "status": "completed",
      "endpoints": [
        "Health Check",
        "Upload File",
        "Get My Uploads",
        "Get Upload by ID",
        "Get Entity Uploads",
        "Delete Upload (Soft Delete)",
        "Delete Upload (Hard Delete)",
        "Replace Upload"
      ]
    },
    {
      "name": "Admin Module",
      "path": "/admin",
      "description": "Centralized admin dashboard, analytics, and cross-cutting administrative operations",
      "status": "completed",
      "subModules": [
        {
          "name": "Dashboard",
          "description": "Admin dashboard overview and recent activity",
          "endpoints": [
            "Health Check",
            "Dashboard Overview Stats",
            "Dashboard Recent Activity"
          ]
        },
        {
          "name": "Analytics",
          "description": "Platform-wide analytics and statistics",
          "endpoints": [
            "Analytics User Stats",
            "Analytics Subscription Stats",
            "Analytics Professional Stats (includes all professional profiles)",
            "Analytics Parent Stats",
            "Analytics Upload Stats",
            "Analytics Growth Stats"
          ]
        },
        {
          "name": "User Management",
          "description": "Global user management operations",
          "endpoints": [
            "Get All Users",
            "Get User Details",
            "Update User Roles",
            "Toggle User Verification",
            "Delete User",
            "Send Temp PIN (Parent Recovery)"
          ]
        }
      ]
    },
    {
      "name": "Notification Module",
      "path": "/notifications",
      "description": "User notification system for in-app notifications and announcements",
      "status": "completed",
      "endpoints": [
        "Health Check",
        "Create Notification",
        "Get Notifications",
        "Get Unread Count",
        "Mark as Read",
        "Mark All as Read",
        "Get Notification Types",
        "Create Announcement (Admin)"
      ]
    },
    {
      "name": "Community Module",
      "path": "/community",
      "description": "Community platform integration with external community service",
      "status": "completed",
      "endpoints": [
        "Health Check",
        "Community Auth",
        "Sync User Data",
        "Generate Magic Link"
      ]
    },
    {
      "name": "Health Module",
      "path": "/health",
      "description": "System health monitoring and readiness probes",
      "status": "completed",
      "endpoints": [
        "Basic Health",
        "Detailed Health",
        "Readiness Probe",
        "Liveness Probe",
        "Database Health",
        "System Stats"
      ]
    },
    {
      "name": "AI Tutor Module",
      "path": "/ai-tutor",
      "description": "AI-powered tutoring system for student questions and answers",
      "status": "completed",
      "endpoints": [
        "Ask Question",
        "Get Question Result"
      ]
    },
    {
      "name": "Curriculum Module",
      "path": "/curriculum",
      "description": "UK Curriculum management with 5-level hierarchy: Year Groups → Subjects → Topics → Sub-Topics → Learning Objectives. Auto-generates objective IDs in format SUBJECT-YEAR-TOPIC-SUBTOPIC-SEQUENCE (e.g., MATH-Y10-ALG-LIN-01)",
      "status": "completed",
      "subModules": [
        {
          "name": "Year Groups",
          "description": "Year group management (e.g., Year 10, Year 11) with key stages and age ranges",
          "endpoints": [
            "Health Check",
            "Create Year Group (Admin)",
            "Get All Year Groups (Public)",
            "Get Year Group by ID (Public)",
            "Get Year Group Hierarchy (Public)",
            "Update Year Group (Admin)",
            "Delete Year Group (Admin)"
          ]
        },
        {
          "name": "Subjects",
          "description": "Subject management within year groups (e.g., Mathematics, English, Science)",
          "endpoints": [
            "Create Subject (Admin)",
            "Get All Subjects (Public)",
            "Get Subject by ID (Public)",
            "Update Subject (Admin)",
            "Delete Subject (Admin)"
          ]
        },
        {
          "name": "Topics",
          "description": "Topic management within subjects (e.g., Algebra, Geometry, Statistics)",
          "endpoints": [
            "Create Topic (Admin)",
            "Get All Topics (Public)",
            "Get Topic by ID (Public)",
            "Update Topic (Admin)",
            "Delete Topic (Admin)"
          ]
        },
        {
          "name": "Sub-Topics",
          "description": "Sub-topic management within topics (e.g., Linear Equations, Quadratic Equations)",
          "endpoints": [
            "Create Sub-Topic (Admin)",
            "Get All Sub-Topics (Public)",
            "Get Sub-Topic by ID (Public)",
            "Update Sub-Topic (Admin)",
            "Delete Sub-Topic (Admin)"
          ]
        },
        {
          "name": "Learning Objectives",
          "description": "Learning objective management with auto-generated IDs and difficulty levels (Foundation, Intermediate, Higher)",
          "endpoints": [
            "Create Objective (Admin)",
            "Get All Objectives (Public)",
            "Get Objective by ID (Public)",
            "Get Objective by ObjectiveId (Public)",
            "Update Objective (Admin)",
            "Delete Objective (Admin)"
          ]
        }
      ]
    },
    {
      "name": "Content Module",
      "path": "/content",
      "description": "Educational content management, marketplace, creator monetization, and analytics. Supports RIGHTSTEPS official content and CREATOR marketplace content with moderation workflow (DRAFT → PENDING_REVIEW → APPROVED → PUBLISHED). Includes 70/30 revenue split, content promotion, badge system, and comprehensive analytics.",
      "status": "completed",
      "subModules": [
        {
          "name": "Content Management",
          "description": "Create, read, update, delete educational content (video, PDF, audio, interactive)",
          "endpoints": [
            "Health Check",
            "Create Content",
            "Get All Content (with filtering)",
            "Get My Content",
            "Get Content by ID",
            "Update Content",
            "Delete Content (soft delete/archive)"
          ]
        },
        {
          "name": "Content Lifecycle",
          "description": "Content submission, publishing, and promotion workflow",
          "endpoints": [
            "Submit Content for Review",
            "Publish Content",
            "Promote Content (BASIC £10, PREMIUM £25)"
          ]
        },
        {
          "name": "Marketplace - Reviews",
          "description": "Content reviews, ratings, and creator replies",
          "endpoints": [
            "Create Review",
            "Get Content Reviews",
            "Reply to Review (Creator)"
          ]
        },
        {
          "name": "Marketplace - Purchases",
          "description": "Content purchases, access control, and sharing",
          "endpoints": [
            "Purchase Content",
            "Get My Purchases",
            "Check Content Access",
            "Generate Share Link",
            "Access Shared Content"
          ]
        },
        {
          "name": "Marketplace - Earnings",
          "description": "Creator earnings tracking and payout requests",
          "endpoints": [
            "Get My Earnings",
            "Request Payout"
          ]
        },
        {
          "name": "Analytics",
          "description": "Content analytics, tracking, and performance metrics",
          "endpoints": [
            "Track Content View",
            "Track Content Completion",
            "Get Content Analytics",
            "Get User Engagement",
            "Get Creator Dashboard",
            "Get Content Performance",
            "Get Revenue Analytics",
            "Get Trending Content",
            "Get Platform Analytics (Admin)"
          ]
        },
        {
          "name": "Admin - Moderation",
          "description": "Content moderation and management (Admin only)",
          "endpoints": [
            "Moderate Content (Approve/Reject)",
            "Feature Content",
            "Update Content Tags",
            "Update Badges (Batch)",
            "Process Payout"
          ]
        },
        {
          "name": "Admin - Analytics",
          "description": "Platform statistics and insights (Admin only)",
          "endpoints": [
            "Get Content Stats",
            "Get Pending Reviews"
          ]
        }
      ]
    },
    {
      "name": "Marketplace Module",
      "path": "/marketplace",
      "description": "Content marketplace for buying and selling educational content with Stripe integration, creator payouts, and content access management",
      "status": "completed",
      "subModules": [
        {
          "name": "Purchases",
          "description": "Content purchase flow with Stripe PaymentIntent",
          "endpoints": [
            "Health Check",
            "Purchase Content (Stripe PaymentIntent)",
            "Confirm Payment",
            "Get My Purchases",
            "Check Content Access",
            "Get Secure Content URL (Signed URL for video playback)"
          ]
        },
        {
          "name": "Reviews",
          "description": "Content reviews and ratings",
          "endpoints": [
            "Create Review",
            "Get Content Reviews",
            "Reply to Review (Creator)"
          ]
        },
        {
          "name": "Payouts",
          "description": "Creator earnings and payout requests",
          "endpoints": [
            "Get My Earnings",
            "Request Payout",
            "Get Payout History"
          ]
        }
      ]
    },
    {
      "name": "Availability Module",
      "path": "/availability",
      "description": "Tutor availability management for scheduling sessions with recurring patterns and time slot management",
      "status": "completed",
      "endpoints": [
        "Health Check",
        "Set Availability",
        "Get My Availability",
        "Get Tutor Availability (Public)",
        "Update Availability",
        "Delete Availability",
        "Get Available Slots",
        "Block Time Slot",
        "Unblock Time Slot"
      ]
    },
    {
      "name": "Wallet Module",
      "path": "/wallet",
      "description": "Creator wallet system for managing earnings, transactions, and payouts from marketplace sales",
      "status": "completed",
      "subModules": [
        {
          "name": "Wallet Management",
          "description": "Wallet balance and transaction management",
          "endpoints": [
            "Health Check",
            "Get My Wallet",
            "Get Transaction History",
            "Get Wallet Stats"
          ]
        },
        {
          "name": "Payouts",
          "description": "Payout requests and processing",
          "endpoints": [
            "Request Payout",
            "Get Payout History",
            "Cancel Payout Request"
          ]
        },
        {
          "name": "Admin Operations",
          "description": "Admin wallet management",
          "endpoints": [
            "Get All Wallets",
            "Get Pending Payouts",
            "Process Payout",
            "Get Platform Revenue"
          ]
        }
      ]
    }
  ],
  "features": {
    "authentication": {
      "methods": ["JWT", "OAuth (Google, Facebook)", "2FA with OTP"],
      "security": ["Rate limiting", "Password hashing", "Token refresh"]
    },
    "payments": {
      "gateways": ["Stripe", "PayPal"],
      "methods": ["Payment Intent", "Checkout Session", "Webhooks"]
    },
    "storage": {
      "providers": ["ImageKit", "AWS S3", "Cloudflare R2"],
      "fileTypes": ["Images", "Videos", "Documents", "PDFs"],
      "videoProcessing": "Inngest + ffmpeg for async video processing"
    },
    "userTypes": {
      "roles": ["USER", "PARENT", "TUTOR", "SPEECH_THERAPIST", "CHILD_PSYCHOLOGIST", "CAREER_COUNSELOR", "OCCUPATIONAL_THERAPIST", "SOCIAL_SKILLS_COACH", "SEN_PRACTITIONER", "NUTRITION_ADVISOR", "DIGITAL_WELLBEING_PRACTITIONER", "ADMIN"],
      "profiles": ["Parent Profile", "Tutor Profile", "Speech Therapist Profile", "Child Psychologist Profile", "Career Counselor Profile", "Occupational Therapist Profile", "Social Skills Coach Profile", "SEN Practitioner Profile", "Nutrition Advisor Profile", "Digital Wellbeing Practitioner Profile"],
      "verification": ["Email verification", "Admin verification for professional profiles"]
    },
    "analytics": {
      "metrics": ["User stats", "Subscription stats", "Revenue stats", "Growth stats"],
      "filtering": ["Date range", "User role", "Status"]
    },
    "curriculum": {
      "hierarchy": ["Year Groups", "Subjects", "Topics", "Sub-Topics", "Learning Objectives"],
      "keyStages": ["KS1", "KS2", "KS3", "KS4", "KS5"],
      "difficultyLevels": ["Foundation", "Intermediate", "Higher"],
      "features": ["Auto-generated objective IDs", "Full hierarchy endpoint", "Pagination and filtering", "Redis caching", "Cascade deletes"],
      "objectiveIdFormat": "SUBJECT-YEAR-TOPIC-SUBTOPIC-SEQUENCE (e.g., MATH-Y10-ALG-LIN-01)"
    },
    "emailSystem": {
      "description": "Component-based email template system with RightSteps branding",
      "location": "src/shared/services/email/",
      "architecture": ["Reusable components (header, footer, button, info box)", "Base template wrapper", "Individual templates for each workflow"],
      "branding": {
        "colors": {
          "primary": "#1A2F6E (Navy Blue)",
          "secondary": ["#60B8F8 (Light Blue)", "#1C2E58 (Dark Blue)"],
          "accent": ["#60C3AA (Green)", "#FFC24A (Yellow)", "#ED545C (Red)"]
        },
        "components": ["Header with gradient", "Footer with branding", "Styled buttons", "Info boxes"]
      },
      "templates": {
        "auth": [
          "Welcome Email - Generic welcome for new users",
          "OTP Email - Email verification code (10 min expiry)",
          "Reset Password Email - Password reset link (1 hour expiry)",
          "Email Updated - Email change notification (sent to both old and new)",
          "Email Verified - Email verification success confirmation"
        ],
        "profile": [
          "Parent Welcome - Parent profile completion welcome",
          "Professional Submitted - Generic template for all professional profiles submitted for verification (used by tutors and 8 professional types)",
          "Professional Approved - Generic template for all professional profiles approved by admin",
          "Professional Changes Requested - Generic template when admin requests profile changes",
          "Professional Rejected - Generic template for all professional profiles rejected by admin"
        ],
        "subscription": [
          "Payment Success - Payment confirmation with details and receipt"
        ],
        "implementation": {
          "note": "Profile email templates use a generic system with professional type as a parameter",
          "genericTemplates": [
            "professional-submitted.template.js - Accepts professionalType (e.g., 'tutor', 'speech therapist') and professionalName",
            "professional-approved.template.js - Accepts professionalType, professionalName, and dashboardUrl",
            "professional-changes-requested.template.js - Accepts professionalType, professionalName, adminNotes, and profileUrl",
            "professional-rejected.template.js - Accepts professionalType, professionalName, and adminNotes"
          ],
          "professionalTypes": [
            "tutor",
            "speech therapist",
            "child psychologist",
            "career counselor",
            "occupational therapist",
            "social skills coach",
            "SEN practitioner",
            "nutrition advisor",
            "digital wellbeing practitioner"
          ]
        }
      },
      "integration": {
        "authModule": ["sendOTPEmail", "sendPasswordResetEmail", "sendWelcomeEmail", "sendEmailVerifiedNotification"],
        "parentProfile": ["sendProfileCompletionEmail", "sendEmailUpdatedNotification"],
        "tutorProfile": ["sendTutorSubmittedEmail", "sendTutorApprovedEmail", "sendTutorChangesRequestedEmail", "sendTutorRejectedEmail"],
        "speechTherapistProfile": ["sendSpeechTherapistSubmittedEmail", "sendSpeechTherapistApprovedEmail", "sendSpeechTherapistChangesRequestedEmail", "sendSpeechTherapistRejectedEmail"],
        "childPsychologistProfile": ["sendChildPsychologistSubmittedEmail", "sendChildPsychologistApprovedEmail", "sendChildPsychologistChangesRequestedEmail", "sendChildPsychologistRejectedEmail"],
        "careerCounselorProfile": ["sendCareerCounselorSubmittedEmail", "sendCareerCounselorApprovedEmail", "sendCareerCounselorChangesRequestedEmail", "sendCareerCounselorRejectedEmail"],
        "occupationalTherapistProfile": ["sendOccupationalTherapistSubmittedEmail", "sendOccupationalTherapistApprovedEmail", "sendOccupationalTherapistChangesRequestedEmail", "sendOccupationalTherapistRejectedEmail"],
        "socialSkillsCoachProfile": ["sendSocialSkillsCoachSubmittedEmail", "sendSocialSkillsCoachApprovedEmail", "sendSocialSkillsCoachChangesRequestedEmail", "sendSocialSkillsCoachRejectedEmail"],
        "senPractitionerProfile": ["sendSenPractitionerSubmittedEmail", "sendSenPractitionerApprovedEmail", "sendSenPractitionerChangesRequestedEmail", "sendSenPractitionerRejectedEmail"],
        "nutritionAdvisorProfile": ["sendNutritionAdvisorSubmittedEmail", "sendNutritionAdvisorApprovedEmail", "sendNutritionAdvisorChangesRequestedEmail", "sendNutritionAdvisorRejectedEmail"],
        "digitalWellbeingPractitionerProfile": ["sendDigitalWellbeingPractitionerSubmittedEmail", "sendDigitalWellbeingPractitionerApprovedEmail", "sendDigitalWellbeingPractitionerChangesRequestedEmail", "sendDigitalWellbeingPractitionerRejectedEmail"],
        "subscriptionPayment": ["sendPaymentSuccessEmail (Stripe, PayPal, Generic)"]
      },
      "helperFunctions": "src/shared/services/email.helper.js - All email sending functions with logging and error handling"
    }
  },
  "architecture": {
    "pattern": "Modular architecture with domain separation",
    "database": "PostgreSQL with Prisma ORM and MonfgoDB for certain modules",
    "caching": "Redis",
    "queue": "BullMQ with Redis",
    "socket": "Socket.io for real-time features",
    "validation": "Zod schemas",
    "logging": "Winston logger",
    "errorHandling": "Centralized error handler with async wrapper"
  },
  "documentation": {
    "postman": "Rightsteps API.postman_collection.json",
    "apiInventory": "api.json"
  },
  "changelog": {
    "8.5.0": {
      "date": "2026-01-22",
      "changes": [
        {
          "category": "Marketplace Module",
          "type": "feature",
          "description": "Standalone marketplace module for content purchases with Stripe integration",
          "details": [
            "Separated marketplace from content module for cleaner architecture",
            "Stripe PaymentIntent integration for secure card payments",
            "Content access management and verification",
            "Creator earnings tracking with 70/30 revenue split",
            "Review and rating system with creator reply support"
          ]
        },
        {
          "category": "Availability Module",
          "type": "feature",
          "description": "Tutor availability management for scheduling live sessions",
          "details": [
            "Set weekly recurring availability patterns",
            "Time slot management with blocking/unblocking",
            "Public endpoint for viewing tutor availability",
            "Integration ready for booking system"
          ]
        },
        {
          "category": "Wallet Module",
          "type": "feature",
          "description": "Creator wallet system for earnings and payouts",
          "details": [
            "Automatic wallet creation on profile approval",
            "Transaction history with filtering",
            "Payout request workflow (REQUESTED → PROCESSING → COMPLETED)",
            "Admin payout processing and platform revenue tracking",
            "Wallet stats and analytics"
          ]
        },
        {
          "category": "Upload Module",
          "type": "enhancement",
          "description": "Added Cloudflare R2 support for video storage",
          "details": [
            "Cloudflare R2 integration for large video files",
            "Inngest for async video processing",
            "ffmpeg for video metadata extraction",
            "ImageKit for images, R2 for videos"
          ]
        },
        {
          "category": "Profile Module",
          "type": "enhancement",
          "description": "Auto wallet creation on profile approval",
          "details": [
            "Wallet automatically created when admin approves professional profile",
            "Applied to all 9 professional profile types",
            "Seamless onboarding for creators"
          ]
        }
      ]
    },
    "8.4.0": {
      "date": "2026-01-21",
      "changes": [
        {
          "category": "Marketplace Module",
          "type": "enhancement",
          "description": "Integrated Stripe payment processing for content purchases with PaymentIntent support",
          "details": [
            "Added Stripe PaymentIntent creation for CARD payments",
            "Payment status tracking (pending/completed/failed)",
            "Client secret returned for frontend payment confirmation",
            "Stripe payment ID stored in ContentPurchase records",
            "Access granted only when payment status is completed",
            "Creator earnings created only after successful payment",
            "Support for both CARD (Stripe) and BANK_TRANSFER payment methods",
            "Revenue split: 70% creator, 30% platform fee",
            "Updated marketplace OpenAPI documentation with Stripe fields",
            "Added paymentIntent response object with id and clientSecret",
            "Updated Purchase schema with stripePaymentId and payment status enum"
          ],
          "files": [
            "src/modules/marketplace/services/purchase.service.js - Added Stripe integration",
            "docs/marketplace-openapi.yaml - Updated with Stripe PaymentIntent response"
          ]
        },
        {
          "category": "Content Module",
          "type": "enhancement",
          "description": "Enhanced content management with filtering, caching, and marketplace separation",
          "details": [
            "Fixed contentFormat filter - now correctly filters by VIDEO, PDF, AUDIO, INTERACTIVE",
            "Added duration sorting capability to content queries",
            "Implemented Redis query result caching (5 minute TTL) for 15-20x performance improvement",
            "Auto-set isMarketplace flag: CREATOR content → true, RIGHTSTEPS content → false",
            "Clear separation between library (RIGHTSTEPS) and marketplace (CREATOR) content",
            "Same objective can have both free RIGHTSTEPS and paid CREATOR content",
            "Hierarchy endpoint caching (10 minute TTL) for 30-40x performance improvement",
            "Scalability score improved from 7/10 to 9/10",
            "System now handles 10,000+ concurrent users and 100,000+ content items"
          ],
          "files": [
            "src/modules/content/validations/content.schema.js - Added contentFormat filter and duration sorting",
            "src/modules/content/services/content.service.js - Added contentFormat filter and isMarketplace auto-set",
            "src/modules/content/controllers/content.controller.js - Added query result caching",
            "src/modules/curriculum/controllers/year-group.controller.js - Added hierarchy caching"
          ]
        }
      ]
    },
    "8.3.0": {
      "date": "2026-01-15",
      "changes": [
        {
          "category": "Content Module",
          "type": "feature",
          "description": "Implemented comprehensive educational content management system with marketplace, creator monetization, and analytics",
          "details": [
            "39 endpoints across 8 sub-modules (Content Management, Lifecycle, Reviews, Purchases, Earnings, Analytics, Admin Moderation, Admin Analytics)",
            "Content creation and management for RIGHTSTEPS official and CREATOR marketplace content",
            "Moderation workflow: DRAFT → PENDING_REVIEW → APPROVED → PUBLISHED → REJECTED/ARCHIVED",
            "Marketplace with reviews, ratings, and creator replies",
            "Content purchase system with 70/30 revenue split (creator/platform)",
            "Creator earnings tracking and payout request system",
            "Content promotion tiers: BASIC (£10), PREMIUM (£25)",
            "Badge system: Popular (50+ enrollments), Trending (10+ views/day), Recommended",
            "Comprehensive analytics: view tracking, completion tracking, engagement metrics",
            "Creator dashboard with earnings, performance, and revenue analytics",
            "Platform-wide analytics for admin (content stats, trending content)",
            "Support for multiple content formats: VIDEO, PDF, AUDIO, INTERACTIVE",
            "Multi-language support: ENGLISH, WELSH, BILINGUAL",
            "Content sharing with access control and share links",
            "Soft delete/archive with purchase protection",
            "Admin moderation tools for content approval, featuring, and badge management",
            "Integration with curriculum objectives for content categorization",
            "Redis caching for performance optimization",
            "Production-grade validation using Zod schemas",
            "Comprehensive OpenAPI 3.0 documentation"
          ],
          "endpoints": {
            "contentManagement": [
              "GET /v1/content/health",
              "POST /v1/content",
              "GET /v1/content",
              "GET /v1/content/my",
              "GET /v1/content/:id",
              "PUT /v1/content/:id",
              "DELETE /v1/content/:id"
            ],
            "contentLifecycle": [
              "POST /v1/content/:id/submit",
              "POST /v1/content/:id/publish",
              "POST /v1/content/:id/promote"
            ],
            "marketplaceReviews": [
              "POST /v1/content/marketplace/:contentId/reviews",
              "GET /v1/content/marketplace/:contentId/reviews",
              "POST /v1/content/marketplace/reviews/:reviewId/reply"
            ],
            "marketplacePurchases": [
              "POST /v1/content/marketplace/:contentId/purchase",
              "GET /v1/content/marketplace/purchases/my",
              "GET /v1/content/marketplace/:contentId/access",
              "POST /v1/content/marketplace/:id/share/generate",
              "GET /v1/content/marketplace/share/:shareToken"
            ],
            "marketplaceEarnings": [
              "GET /v1/content/marketplace/earnings",
              "POST /v1/content/marketplace/payouts/request"
            ],
            "analytics": [
              "POST /v1/content/analytics/:id/track-view",
              "POST /v1/content/analytics/:id/track-completion",
              "GET /v1/content/analytics/:id/analytics",
              "GET /v1/content/analytics/:id/engagement",
              "GET /v1/content/analytics/creator/dashboard",
              "GET /v1/content/analytics/creator/performance",
              "GET /v1/content/analytics/creator/revenue",
              "GET /v1/content/analytics/trending",
              "GET /v1/content/analytics/platform"
            ],
            "adminModeration": [
              "POST /v1/content/admin/content/:id/moderate",
              "POST /v1/content/admin/content/:id/feature",
              "PUT /v1/content/admin/content/:id/tags",
              "POST /v1/content/admin/content/badges/update",
              "POST /v1/content/admin/payouts/:payoutId/process"
            ],
            "adminAnalytics": [
              "GET /v1/content/admin/content/stats",
              "GET /v1/content/admin/content/pending-reviews"
            ]
          },
          "files": [
            "prisma/schema.prisma - Added Content, ContentReview, ContentPurchase, CreatorEarnings, CreatorPayout models",
            "src/modules/content/controllers/*.controller.js - 4 controller files (content, marketplace, admin, analytics)",
            "src/modules/content/services/*.service.js - 4 service files with business logic",
            "src/modules/content/routes/*.route.js - 4 route files (content, marketplace, admin, analytics)",
            "src/modules/content/validations/*.schema.js - 4 validation schema files",
            "src/modules/content/index.js - Module exports and route mounting",
            "src/routes/index.js - Registered content routes at /content",
            "docs/content-openapi.yaml - Complete OpenAPI 3.0 specification with 39 endpoints",
            "src/config/swagger.js - Added content docs to Swagger UI",
            "src/app.js - Added content docs route handler",
            "api.json - Updated with Content module documentation"
          ]
        }
      ]
    },
    "8.2.0": {
      "date": "2026-01-10",
      "changes": [
        {
          "category": "Curriculum Module",
          "type": "feature",
          "description": "Implemented comprehensive UK Curriculum management system with 5-level hierarchy",
          "details": [
            "5-level hierarchy: Year Groups → Subjects → Topics → Sub-Topics → Learning Objectives",
            "Auto-generated objective IDs in format SUBJECT-YEAR-TOPIC-SUBTOPIC-SEQUENCE (e.g., MATH-Y10-ALG-LIN-01)",
            "31 endpoints across 5 entity types (Year Groups, Subjects, Topics, Sub-Topics, Objectives)",
            "Full hierarchy endpoint to retrieve complete curriculum tree structure",
            "Public GET endpoints (no auth required) for curriculum browsing",
            "Admin-protected POST/PATCH/DELETE endpoints for curriculum management",
            "Pagination and filtering for all GET endpoints with search capability",
            "Three difficulty levels: Foundation, Intermediate, Higher",
            "UK Key Stages support: KS1, KS2, KS3, KS4, KS5",
            "Redis caching with graceful fallback on cache failures",
            "Cascade deletes across hierarchy levels",
            "Sequential numbering system for objectives within each sub-topic",
            "Production-grade error handling with specific error messages",
            "Comprehensive validation using Zod schemas",
            "Follows existing code patterns (no comments, kebab-case filenames, CacheManager usage)"
          ],
          "endpoints": {
            "yearGroups": [
              "GET /v1/curriculum/health",
              "POST /v1/curriculum/year-groups (Admin)",
              "GET /v1/curriculum/year-groups (Public)",
              "GET /v1/curriculum/year-groups/:id (Public)",
              "GET /v1/curriculum/year-groups/:id/hierarchy (Public)",
              "PATCH /v1/curriculum/year-groups/:id (Admin)",
              "DELETE /v1/curriculum/year-groups/:id (Admin)"
            ],
            "subjects": [
              "POST /v1/curriculum/subjects (Admin)",
              "GET /v1/curriculum/subjects (Public)",
              "GET /v1/curriculum/subjects/:id (Public)",
              "PATCH /v1/curriculum/subjects/:id (Admin)",
              "DELETE /v1/curriculum/subjects/:id (Admin)"
            ],
            "topics": [
              "POST /v1/curriculum/topics (Admin)",
              "GET /v1/curriculum/topics (Public)",
              "GET /v1/curriculum/topics/:id (Public)",
              "PATCH /v1/curriculum/topics/:id (Admin)",
              "DELETE /v1/curriculum/topics/:id (Admin)"
            ],
            "subTopics": [
              "POST /v1/curriculum/sub-topics (Admin)",
              "GET /v1/curriculum/sub-topics (Public)",
              "GET /v1/curriculum/sub-topics/:id (Public)",
              "PATCH /v1/curriculum/sub-topics/:id (Admin)",
              "DELETE /v1/curriculum/sub-topics/:id (Admin)"
            ],
            "objectives": [
              "POST /v1/curriculum/objectives (Admin)",
              "GET /v1/curriculum/objectives (Public)",
              "GET /v1/curriculum/objectives/:id (Public)",
              "GET /v1/curriculum/objectives/by-objective-id/:objectiveId (Public)",
              "PATCH /v1/curriculum/objectives/:id (Admin)",
              "DELETE /v1/curriculum/objectives/:id (Admin)"
            ]
          },
          "files": [
            "prisma/schema.prisma - Added 5 curriculum models with relationships and indexes",
            "src/modules/curriculum/utils/objective-id-generator.js - Auto-generates unique objective IDs",
            "src/modules/curriculum/services/*.service.js - 5 service files with CacheManager integration",
            "src/modules/curriculum/controllers/*.controller.js - 5 controller files with error handling",
            "src/modules/curriculum/validations/curriculum.schema.js - Comprehensive Zod validation schemas",
            "src/modules/curriculum/routes/curriculum.route.js - All 31 routes with middleware",
            "src/modules/curriculum/index.js - Module exports",
            "src/routes/index.js - Registered curriculum routes",
            "Rightsteps API.postman_collection.json - Added Curriculum Module with 31 endpoints",
            "api.json - Updated with curriculum documentation"
          ]
        }
      ]
    },
    "8.0.0": {
      "date": "2025-12-19",
      "changes": [
        {
          "category": "Professional Profiles Progressive Registration",
          "type": "feature",
          "description": "Implemented 5-step progressive registration for all 8 professional profiles matching tutor quality standard",
          "details": [
            "All 8 professional profiles now have standardized 5-step registration structure:",
            "Step 1: Personal Information (firstName, lastName, DOB, mobile, address, PIN, security Q&A)",
            "Step 2: Background and Safety (ID verification, DBS certificate, Right to Work)",
            "Step 3: Professional Qualifications (profile-specific credentials and certifications)",
            "Step 4: Client Focus (age groups, service categories)",
            "Step 5: Pricing (hourly rate, payment method, consent) - triggers PENDING_VERIFICATION",
            "Added ChildPsychologistService enum with 10 service types",
            "Added ageGroups and serviceCategories fields to ChildPsychologistProfile",
            "Comprehensive validation coverage (100%) for all required fields at each step",
            "Email notifications on profile submission (step 5 completion)",
            "Admin verification workflow (approve/reject/request changes)",
            "Cache invalidation on profile updates",
            "Production-grade code with proper error handling and logging"
          ],
          "affected_profiles": [
            "Speech Therapist (HCPC, RCSLT membership, professional indemnity)",
            "Child Psychologist (professional qualifications, indemnity insurance)",
            "Career Counselor (professional qualifications, indemnity insurance)",
            "Occupational Therapist (qualifications, experience history, references)",
            "Social Skills Coach (professional qualifications)",
            "SEN Practitioner (professional qualifications)",
            "Nutrition Advisor (professional qualifications)",
            "Digital Wellbeing Practitioner (professional qualifications)"
          ],
          "files": [
            "prisma/schema.prisma - Added ChildPsychologistService enum, updated ChildPsychologistProfile model",
            "src/modules/profile/constants/registration.step.js - Complete restructure to 7-step structure for all profiles",
            "src/modules/profile/helpers/*.helper.js - Rewrote all 8 helper files with progressive validation",
            "src/modules/profile/controllers/*.controller.js - Updated all 8 controllers with verification workflow",
            "All files follow tutor quality standard with no comments and clean production code"
          ]
        },
        {
          "category": "Database Schema",
          "type": "migration",
          "description": "Applied Prisma migration for ChildPsychologist profile enhancements",
          "details": [
            "Migration: 20251219131012_add_child_psychologist_service_fields",
            "Added ChildPsychologistService enum to database",
            "Added ageGroups and serviceCategories columns to ChildPsychologistProfile table",
            "Ensures consistency across all professional profile models"
          ]
        },
        {
          "category": "Code Quality",
          "type": "improvement",
          "description": "Fixed all ESLint issues and improved code formatting",
          "details": [
            "Fixed max-len violations in all 8 professional controller files",
            "Fixed object-shorthand issues in payment and subscription services",
            "All code now passes ESLint with 0 errors and 0 warnings",
            "Improved code readability with proper line breaks"
          ]
        }
      ]
    },
    "6.0.2": {
      "date": "2025-12-05",
      "changes": [
        {
          "category": "Parent Profile Progressive Registration",
          "type": "feature",
          "description": "Implemented progressive registration flow for parent profiles with multi-step tracking",
          "details": [
            "Added registrationStep (1-4) and isRegistrationComplete fields to all profile models",
            "Step 1: Personal Information (children optional)",
            "Step 2: Add Children (new endpoint: POST /v1/profile/parent/add-children)",
            "Step 3: Subscription Plan",
            "Step 4: Registration Complete",
            "All APIs now return nextStep object with route, step number, and message",
            "Users can logout and resume registration from where they left off",
            "Added securityAnswer field to all 10 profile models for account recovery",
            "Created registrationSteps.js constants for all 10 personas",
            "Created determineNextStep() helper function for smart navigation",
            "Enhanced /v1/auth/me and /v1/profile/me to exclude sensitive fields (pin, securityQuestion, securityAnswer)"
          ],
          "endpoints": [
            "POST /v1/profile/parent - Now accepts optional children array",
            "POST /v1/profile/parent/add-children - New endpoint for Step 2",
            "GET /v1/auth/me - Returns nextStep for progressive navigation",
            "GET /v1/profile/me - Returns nextStep and current progress",
            "POST /v1/auth/login - Returns nextStep to redirect user"
          ],
          "files": [
            "prisma/schema.prisma - Added registrationStep, isRegistrationComplete, securityAnswer to all profiles",
            "src/shared/constants/registrationSteps.js - Created registration steps for all personas",
            "src/shared/utils/helper/registrationHelper.js - Created determineNextStep() function",
            "src/modules/profile/validations/parent.schema.js - Made children optional, added securityAnswer",
            "src/modules/profile/controllers/parent.controller.js - Added addChildren endpoint, auto-detect step",
            "src/modules/profile/controllers/profile.controller.js - Added nextStep to response",
            "src/modules/auth/controllers/auth.controller.js - Added children relationship, excluded sensitive fields, added nextStep",
            "src/modules/subscription/services/subscription.service.js - Update registrationStep on subscription",
            "src/modules/profile/routes/profile.route.js - Added /parent/add-children route",
            "docs/frontend-guide/profile-docs.md - Created comprehensive documentation",
            "Rightsteps API.postman_collection.json - Added Add Children endpoint with examples"
          ]
        },
        {
          "category": "Documentation",
          "type": "feature",
          "description": "Created comprehensive profile API documentation for frontend developers",
          "details": [
            "Step-by-step API documentation with request/response examples",
            "Progressive registration flow chart",
            "nextStep usage guide with code examples",
            "Field validations and error handling",
            "Complete walkthrough from signup to dashboard"
          ],
          "files": ["docs/frontend-guide/profile-docs.md"]
        }
      ]
    },
    "6.0.1": {
      "date": "2025-12-04",
      "changes": [
        {
          "category": "Email System Refactoring",
          "type": "improvement",
          "description": "Refactored professional profile email templates from 36 individual files to 4 generic templates",
          "details": [
            "Reduced template files from 36 to 4 (professional-submitted, professional-approved, professional-changes-requested, professional-rejected)",
            "Templates now accept professionalType as a parameter (e.g., 'tutor', 'speech therapist')",
            "Easier to maintain - one change updates all profile types",
            "Email helper functions remain the same (backward compatible)"
          ],
          "files": [
            "src/shared/services/email/templates/profile/professional-*.template.js",
            "src/shared/services/email.helper.js",
            "src/shared/services/email/index.js"
          ]
        },
        {
          "category": "Auth API Enhancement",
          "type": "feature",
          "description": "Enhanced GET /v1/auth/me endpoint to include all professional profiles",
          "details": [
            "Now includes all 9 professional profile types (speechTherapist, childPsychologist, careerCounselor, occupationalTherapist, socialSkillsCoach, senPractitioner, nutritionAdvisor, digitalWellbeingPractitioner)",
            "Added oauthProvider field to user response",
            "Enhanced profile completion detection for all professional types",
            "Returns all active profiles for users with multiple roles",
            "Improved requiresProfileCreation logic to check all profile types"
          ],
          "endpoint": "GET /v1/auth/me",
          "files": ["src/modules/auth/controllers/auth.controller.js"]
        },
        {
          "category": "Google OAuth Testing",
          "type": "feature",
          "description": "Added Google OAuth login test page in client for testing purposes",
          "details": [
            "Created GoogleLoginTest page with Google sign-in button",
            "Added AuthCallback handler for OAuth redirect",
            "Displays user information and JWT token after login",
            "Includes logout functionality",
            "Added documentation in client/GOOGLE_LOGIN_TEST.md"
          ],
          "files": [
            "client/src/pages/GoogleLoginTest.jsx",
            "client/src/pages/AuthCallback.jsx",
            "client/src/App.jsx",
            "client/.env",
            "client/GOOGLE_LOGIN_TEST.md"
          ]
        },
        {
          "category": "Postman Collection",
          "type": "update",
          "description": "Added missing Verify Email Update endpoint to Parent Profile Module",
          "details": [
            "Added POST /v1/profile/parent/verify-email endpoint",
            "Endpoint verifies OTP for email address updates",
            "Positioned after Update Parent Profile in collection"
          ],
          "files": ["Rightsteps API.postman_collection.json"]
        }
      ]
    },
    "6.0.0": {
      "date": "2025-12-03",
      "changes": [
        {
          "category": "Professional Profiles",
          "type": "feature",
          "description": "Added 8 new professional profile types with admin verification workflows",
          "details": [
            "Speech Therapist Profile",
            "Child Psychologist Profile",
            "Career Counselor Profile",
            "Occupational Therapist Profile",
            "Social Skills Coach Profile",
            "SEN Practitioner Profile",
            "Nutrition Advisor Profile",
            "Digital Wellbeing Practitioner Profile"
          ]
        },
        {
          "category": "Analytics",
          "type": "feature",
          "description": "Unified professional analytics endpoint",
          "details": [
            "Replaced getTutorStats with getProfessionalStats",
            "Includes statistics for all 9 professional types (tutor + 8 new profiles)",
            "Dashboard now shows totalProfessionals and pendingProfessionals"
          ]
        }
      ]
    }
  }
}

